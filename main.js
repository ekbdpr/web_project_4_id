!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var n,r;return n=e,(r=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"_getInitialCard",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"_getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"getInitialInfo",value:function(){return Promise.all([this._getInitialCard(),this._getUserInfo()])}},{key:"setUserPicture",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",body:JSON.stringify({avatar:e}),headers:this._headers}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",body:JSON.stringify({name:e.name,about:e.title}),headers:this._headers}).then(this._checkResponse)}},{key:"postCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",body:JSON.stringify(e),headers:this._headers}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"dislikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function e(t,n,r){var o=t.handleCardClick,i=t.handleDeleteClick,u=t.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n.name,this._link=n.link,this._likes=n.likes,this._owner=n.owner,this._cardSelector=r,this._handleCardClick=o,this._handleDeleteClick=i,this._handleLikeClick=u}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element__item").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._image=this._element.querySelector(".element__image"),this._imageText=this._element.querySelector(".element__text"),this._cardLikes=this._element.querySelector(".element__like-counts"),this._image.src=this._link,this._image.alt=this._name,this._imageText.textContent=this._name,this._cardLikes.textContent=this._likes.length,this._setEventListeners(),this._initialLikeState(),this._element}},{key:"deleteCard",value:function(e){e.target.closest(".element__item").remove()}},{key:"toggleLike",value:function(){this._heartButton=this._element.querySelector(".element__heart-btn"),this._cardLikes=this._element.querySelector(".element__like-counts"),this._heartButton.classList.toggle("element__heart-btn_active"),this._cardLikes.textContent=this._likes.length}},{key:"_initialLikeState",value:function(){this.isLiked()?this._heartButton.classList.add("element__heart-btn_active"):this._heartButton.classList.remove("element__heart-btn_active")}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._owner._id}))}},{key:"_setEventListeners",value:function(){this._heartButton=this._element.querySelector(".element__heart-btn"),this._deleteButton=this._element.querySelector(".element__delete-btn"),this._heartButton.addEventListener("click",this._handleLikeClick),this._deleteButton.addEventListener("click",this._handleDeleteClick),this._image.addEventListener("click",this._handleCardClick)}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formInputSelector=t.formInputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inputErrorModifier=t.inputErrorModifier,this._errorModifier=t.errorModifier,this._buttonErrorModifier=t.buttonErrorModifier,this._formElement=n}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._errorModifier),t.classList.add(this._inputErrorModifier),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._errorModifier),t.classList.remove(this._inputErrorModifier),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInputInvalid",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInputInvalid()?(this._button.classList.add(this._buttonErrorModifier),this._button.disabled=!0):(this._button.classList.remove(this._buttonErrorModifier),this._button.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._formInputSelector)),this._button=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a={formInputSelector:".form__input",submitButtonSelector:".btn__submit",inputErrorModifier:"form__input-error",errorModifier:"form__input_type_error",buttonErrorModifier:"btn_inactive"},s=document.querySelector(".profile__username"),f=document.querySelector(".profile__about"),h=document.querySelector(".content"),y=document.querySelector(".main-content"),d=document.querySelector(".btn_edit"),p=document.querySelector(".btn_add"),m=document.querySelector(".profile__picture"),b=document.querySelector(".profile__picture-edit"),v=".content",_=function(){var e=window.innerWidth-document.documentElement.clientWidth;y.classList.toggle("main-content_disabled"),h.style.overflow="hidden"===h.style.overflow?"auto":"hidden",h.style.width="calc(100% - ".concat(e,"px)")};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===g(o)?o:String(o)),r)}var o}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return this._class=this._popup.replace("#",".").replace("-template",""),this._popupElement=document.querySelector(this._popup).content.querySelector(this._class).cloneNode(!0),this._popupElement}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&document.contains(this._element)&&this.close()}},{key:"_handleClickOutClose",value:function(e){this._element.contains(e.target)||this.close()}},{key:"open",value:function(){var e=this;return this._element=this._getTemplate(),setTimeout((function(){_(),e._setEventListeners(),e._element.classList.toggle("popup")}),100),this._element}},{key:"close",value:function(){_(),this._removeEventListeners(),this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._closeButton=this._element.querySelector(".btn__close"),this._handleEscCloseFn=function(t){return e._handleEscClose(t)},this._handleClickOutCloseFn=function(t){return e._handleClickOutClose(t)},this._closeButton.addEventListener("click",(function(){return e.close()})),document.addEventListener("keydown",this._handleEscCloseFn),document.addEventListener("mousedown",this._handleClickOutCloseFn)}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keydown",this._handleEscCloseFn),document.removeEventListener("mousedown",this._handleClickOutCloseFn)}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},O.apply(this,arguments)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n,r=e.handleEventSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleEventSubmit=r,n}return t=u,(n=[{key:"_setEventListeners",value:function(){O(P(u.prototype),"_setEventListeners",this).call(this),this._yesButton=this._element.querySelector(".btn__submit"),this._yesButton.addEventListener("click",this._handleEventSubmit)}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(k);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n,r=e.handleEventSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleEventSubmit=r,n}return t=u,(n=[{key:"renderLoading",value:function(e,t){this._element.querySelector(".btn__submit").textContent=e?"Menyimpan...":t}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},Array.from(this._element.querySelectorAll(".form__input")).forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"_setEventListeners",value:function(){var e=this;T(q(u.prototype),"_setEventListeners",this).call(this),this._element.addEventListener("submit",(function(t){t.preventDefault(),e._handleEventSubmit(e._getInputValues())}))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(k);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===B(o)?o:String(o)),r)}var o}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},A.apply(this,arguments)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._image=e.src,n._text=e.alt,n}return t=u,(n=[{key:"open",value:function(){return A(D(u.prototype),"open",this).call(this),this._element.querySelector(".show-picture__image").src=this._image,this._element.querySelector(".show-picture__image").alt=this._text,this._element.querySelector(".show-picture__text").textContent=this._text,this._element}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(k);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===N(o)?o:String(o)),r)}var o}var H=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;Array.isArray(this._renderedItems)?this._renderedItems.forEach((function(t){e._renderer(t)})):this._renderer(this._renderedItems)}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==J(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===J(o)?o:String(o)),r)}var o}var W=function(){function e(t){var n=t.userName,r=t.userAbout;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userAbout=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userAbout.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._userName.textContent=t,this._userAbout.textContent=n}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $,K=new n({baseUrl:"https://around.nomoreparties.co/v1/web_idn_02",headers:{authorization:"008c1c55-3b56-46f6-9605-a10cac4bcdce","Content-Type":"application/json"}});K.getInitialInfo().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,u,c=[],l=!0,a=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{if(!l&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(a)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],u=r[1];m.src=u.avatar,Q.setUserInfo({name:u.name,about:u.about}),($=new H({items:o,renderer:function(e){var t=new i({handleCardClick:function(e){te(e)},handleDeleteClick:function(n){ee(e,t,n)},handleLikeClick:function(){!1===t.isLiked()?(e.likes.push(u),t.toggleLike(),K.likeCard(e._id).then().catch((function(e){console.log(e)}))):(e.likes.pop(),t.toggleLike(),K.dislikeCard(e._id).then().catch((function(e){console.log(e)})))}},e,"#card-template"),n=t.generateCard();$.addItem(n)}},".element")).clear(),$.renderItems()})).catch((function(e){console.log(e)}));var Q=new W({userName:s,userAbout:f}),X=new H({items:"#profile-picture-template",renderer:function(e){var t=new x({handleEventSubmit:function(e){t.renderLoading(!0),K.setUserPicture(e.link).then((function(e){m.src=e.avatar})).catch((function(e){console.log(e)})).finally((function(){t.renderLoading(!1,"Simpan"),t.close()}))}},e),n=t.open();new l(a,n).enableValidation(),X.addItem(n)}},v),Y=new H({items:"#edit-profile-template",renderer:function(e){var t=new x({handleEventSubmit:function(e){t.renderLoading(!0),Q.setUserInfo({name:e.name,about:e.title}),K.setUserInfo(e).then((function(){})).catch((function(e){console.log(e)})).finally((function(){t.renderLoading(!1,"Simpan"),t.close()}))}},e),n=t.open(),r=Q.getUserInfo(),o=n.querySelector('input[name="name"]'),i=n.querySelector('input[name="title"]');new l(a,n).enableValidation(),setTimeout((function(){o.value=r.name,i.value=r.about}),100),Y.addItem(n)}},v),Z=new H({items:"#add-card-template",renderer:function(e){var t=new x({handleEventSubmit:function(e){t.renderLoading(!0);var n={name:e.title,link:e.link};K.postCard(n).then((function(e){$._renderedItems.unshift(e),$.clear(),$.renderItems()})).catch((function(e){console.log(e)})).finally((function(){t.renderLoading(!1,"Simpan"),t.close()}))}},e),n=t.open();new l(a,n).enableValidation(),Z.addItem(n)}},v),ee=function(e,t,n){var r=new H({items:"#del-confirm-template",renderer:function(o){var i=new C({handleEventSubmit:function(){t.deleteCard(n),K.deleteCard(e._id).then().catch((function(e){console.log(e)})),i.close()}},o),u=i.open();r.addItem(u)}},v);r.renderItems()},te=function(e){var t=new H({items:e.target,renderer:function(e){var n=new V(e,"#show-picture-template").open();t.addItem(n)}},v);t.renderItems()};m.addEventListener("click",(function(){X.renderItems()})),d.addEventListener("click",(function(){Y.renderItems()})),p.addEventListener("click",(function(){Z.renderItems()})),m.addEventListener("mouseover",(function(){b.style.display="block"})),m.addEventListener("mouseout",(function(){b.style.display="none"}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RUFBYUssT0FDbkNhLEVBQWdCdEIsUUFBUVEsRUFDMUIsR0FFRnBLLEdBRUZrTCxFQUFnQnBCLGFBQ2xCLEVBR01mLEdBQWEsU0FBQzNELEdBQ2xCLElBQU1nRyxFQUFZLElBQUkvRCxFQUNwQixDQUNFeEYsTUFBT3VELEVBQUl0RSxPQUNYeUcsU0FBVSxTQUFDUSxHQUNULElBQ01zRCxFQURhLElBQUlsRSxFQUFlWSxFUmxOWCwwQlFtTk9zQyxPQUNsQ2UsRUFBVXhCLFFBQVF5QixFQUNwQixHQUVGckwsR0FFRm9MLEVBQVV0QixhQUNaLEVBRUEzRixFQUF1QnhDLGlCQUFpQixTQUFTLFdBQy9Db0ksRUFBaUJELGFBQ25CLElBQ0E3RixFQUFtQnRDLGlCQUFpQixTQUFTLFdBQzNDNEksRUFBY1QsYUFDaEIsSUFDQTVGLEVBQWtCdkMsaUJBQWlCLFNBQVMsV0FDMUNpSixFQUFhZCxhQUNmLElBQ0EzRixFQUF1QnhDLGlCQUFpQixhUHhQUCxXQUMvQnlDLEVBQW9CTyxNQUFNMkcsUUFBVSxPQUN0QyxJT3VQQW5ILEVBQXVCeEMsaUJBQWlCLFlQclBMLFdBQ2pDeUMsRUFBb0JPLE1BQU0yRyxRQUFVLE1BQ3RDLEciLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2lkLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvdXRpbHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9pZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhDb25maXJtYXRpb24uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9pZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9pZC8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2lkLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcclxuICAgIHRoaXMuX2Jhc2VVcmwgPSBiYXNlVXJsO1xyXG4gICAgdGhpcy5faGVhZGVycyA9IGhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICAgIGlmIChyZXMub2spIHtcclxuICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgX2dldEluaXRpYWxDYXJkKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgX2dldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiR0VUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0SW5pdGlhbEluZm8oKSB7XHJcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoW3RoaXMuX2dldEluaXRpYWxDYXJkKCksIHRoaXMuX2dldFVzZXJJbmZvKCldKTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJQaWN0dXJlKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoeyBhdmF0YXI6IHZhbHVlIH0pLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogdmFsdWUubmFtZSxcclxuICAgICAgICBhYm91dDogdmFsdWUudGl0bGUsXHJcbiAgICAgIH0pLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIHBvc3RDYXJkKHZhbHVlKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHZhbHVlKSxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGxpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGRpc2xpa2VDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoXHJcbiAgICB7IGhhbmRsZUNhcmRDbGljaywgaGFuZGxlRGVsZXRlQ2xpY2ssIGhhbmRsZUxpa2VDbGljayB9LFxyXG4gICAgZGF0YSxcclxuICAgIGNhcmRTZWxlY3RvclxyXG4gICkge1xyXG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhLmxpbms7XHJcbiAgICB0aGlzLl9saWtlcyA9IGRhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9vd25lciA9IGRhdGEub3duZXI7XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sgPSBoYW5kbGVDYXJkQ2xpY2s7XHJcbiAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljayA9IGhhbmRsZURlbGV0ZUNsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUNsaWNrID0gaGFuZGxlTGlrZUNsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgY29uc3QgY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxyXG4gICAgICAucXVlcnlTZWxlY3Rvcih0aGlzLl9jYXJkU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faXRlbVwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIGdlbmVyYXRlQ2FyZCgpIHtcclxuICAgIHRoaXMuX2VsZW1lbnQgPSB0aGlzLl9nZXRUZW1wbGF0ZSgpO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5faW1hZ2VUZXh0ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX3RleHRcIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1jb3VudHNcIik7XHJcblxyXG4gICAgdGhpcy5faW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcclxuICAgIHRoaXMuX2ltYWdlLmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9pbWFnZVRleHQudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG5cclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9pbml0aWFsTGlrZVN0YXRlKCk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBkZWxldGVDYXJkKGUpIHtcclxuICAgIGUudGFyZ2V0LmNsb3Nlc3QoXCIuZWxlbWVudF9faXRlbVwiKS5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIHRvZ2dsZUxpa2UoKSB7XHJcbiAgICB0aGlzLl9oZWFydEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19oZWFydC1idG5cIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZXMgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZS1jb3VudHNcIik7XHJcblxyXG4gICAgdGhpcy5faGVhcnRCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImVsZW1lbnRfX2hlYXJ0LWJ0bl9hY3RpdmVcIik7XHJcbiAgICB0aGlzLl9jYXJkTGlrZXMudGV4dENvbnRlbnQgPSB0aGlzLl9saWtlcy5sZW5ndGg7XHJcbiAgfVxyXG5cclxuICBfaW5pdGlhbExpa2VTdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLmlzTGlrZWQoKSkge1xyXG4gICAgICB0aGlzLl9oZWFydEJ1dHRvbi5jbGFzc0xpc3QuYWRkKFwiZWxlbWVudF9faGVhcnQtYnRuX2FjdGl2ZVwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hlYXJ0QnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJlbGVtZW50X19oZWFydC1idG5fYWN0aXZlXCIpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaXNMaWtlZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9saWtlcy5zb21lKChsaWtlKSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fb3duZXIuX2lkKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2hlYXJ0QnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2hlYXJ0LWJ0blwiKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19kZWxldGUtYnRuXCIpO1xyXG5cclxuICAgIHRoaXMuX2hlYXJ0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVMaWtlQ2xpY2spO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCB0aGlzLl9oYW5kbGVEZWxldGVDbGljayk7XHJcbiAgICB0aGlzLl9pbWFnZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlQ2FyZENsaWNrKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IoaXRlbXMsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtSW5wdXRTZWxlY3RvciA9IGl0ZW1zLmZvcm1JbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBpdGVtcy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2lucHV0RXJyb3JNb2RpZmllciA9IGl0ZW1zLmlucHV0RXJyb3JNb2RpZmllcjtcclxuICAgIHRoaXMuX2Vycm9yTW9kaWZpZXIgPSBpdGVtcy5lcnJvck1vZGlmaWVyO1xyXG4gICAgdGhpcy5fYnV0dG9uRXJyb3JNb2RpZmllciA9IGl0ZW1zLmJ1dHRvbkVycm9yTW9kaWZpZXI7XHJcbiAgICB0aGlzLl9mb3JtRWxlbWVudCA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JNb2RpZmllcik7XHJcbiAgICBlcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yTW9kaWZpZXIpO1xyXG4gICAgZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gaW5wdXRFbGVtZW50LnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG5cclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yTW9kaWZpZXIpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvck1vZGlmaWVyKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFzSW5wdXRJbnZhbGlkKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGlmICh0aGlzLl9oYXNJbnB1dEludmFsaWQoKSkge1xyXG4gICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9idXR0b25FcnJvck1vZGlmaWVyKTtcclxuICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2J1dHRvbkVycm9yTW9kaWZpZXIpO1xyXG4gICAgICB0aGlzLl9idXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXHJcbiAgICAgIHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fZm9ybUlucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG4gICAgdGhpcy5fYnV0dG9uID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcblxyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IHZhbGlkYXRpb25FbGVtZW50cyA9IHtcclxuICBmb3JtSW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIuYnRuX19zdWJtaXRcIixcclxuICBpbnB1dEVycm9yTW9kaWZpZXI6IFwiZm9ybV9faW5wdXQtZXJyb3JcIixcclxuICBlcnJvck1vZGlmaWVyOiBcImZvcm1fX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBidXR0b25FcnJvck1vZGlmaWVyOiBcImJ0bl9pbmFjdGl2ZVwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGNhcmRFbGVtZW50cyA9IHtcclxuICBjYXJkQ29udGFpbmVyOiBcIi5lbGVtZW50X19pdGVtXCIsXHJcbiAgY2FyZEltYWdlOiBcIi5lbGVtZW50X19pbWFnZVwiLFxyXG4gIGNhcmRUZXh0OiBcIi5lbGVtZW50X190ZXh0XCIsXHJcbiAgY2FyZEhlYXJ0QnV0dG9uOiBcIi5lbGVtZW50X19oZWFydC1idG5cIixcclxuICBjYXJkRGVsZXRlQnV0dG9uOiBcIi5lbGVtZW50X19kZWxldGUtYnRuXCIsXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgcHJvZmlsZVVzZXJTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fdXNlcm5hbWVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlQWJvdXRTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWJvdXRcIik7XHJcbmV4cG9ydCBjb25zdCBjb250ZW50U2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRlbnRcIik7XHJcbmV4cG9ydCBjb25zdCBtYWluQ29udGVudFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tYWluLWNvbnRlbnRcIik7XHJcbmV4cG9ydCBjb25zdCBlZGl0QnV0dG9uU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl9lZGl0XCIpO1xyXG5leHBvcnQgY29uc3QgYWRkQnV0dG9uU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl9hZGRcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlUGljdHVyZVNlbGVjdG9yID1cclxuICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY3R1cmVcIik7XHJcbmV4cG9ydCBjb25zdCBwcm9maWxlRWRpdFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuICBcIi5wcm9maWxlX19waWN0dXJlLWVkaXRcIlxyXG4pO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbnRlbnQgPSBcIi5jb250ZW50XCI7XHJcbmV4cG9ydCBjb25zdCBlbGVtZW50ID0gXCIuZWxlbWVudFwiO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVRlbXBsYXRlID0gXCIjcHJvZmlsZS1waWN0dXJlLXRlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBlZGl0VGVtcGxhdGUgPSBcIiNlZGl0LXByb2ZpbGUtdGVtcGxhdGVcIjtcclxuZXhwb3J0IGNvbnN0IGFkZFRlbXBsYXRlID0gXCIjYWRkLWNhcmQtdGVtcGxhdGVcIjtcclxuZXhwb3J0IGNvbnN0IGRlbGV0ZUNhcmRUZW1wbGF0ZSA9IFwiI2RlbC1jb25maXJtLXRlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBcIiNjYXJkLXRlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBzaG93UGljdHVyZVRlbXBsYXRlID0gXCIjc2hvdy1waWN0dXJlLXRlbXBsYXRlXCI7XHJcbiIsImltcG9ydCB7XHJcbiAgY29udGVudFNlbGVjdG9yLFxyXG4gIG1haW5Db250ZW50U2VsZWN0b3IsXHJcbiAgcHJvZmlsZUVkaXRTZWxlY3RvcixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbi8vIHRvZ2dsZSBwYWdlICYgc2Nyb2xsYmFyIHZpc2liaWxpdHkgd2hlbiBhIG1vZGFsIHdpbmRvdyBpcyBvcGVuZWQgYW5kIGNsb3NlZFxyXG5leHBvcnQgY29uc3QgcGFnZVNldHRpbmdzID0gKCkgPT4ge1xyXG4gIGNvbnN0IHNjcm9sbGJhcldpZHRoID1cclxuICAgIHdpbmRvdy5pbm5lcldpZHRoIC0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoO1xyXG5cclxuICBtYWluQ29udGVudFNlbGVjdG9yLmNsYXNzTGlzdC50b2dnbGUoXCJtYWluLWNvbnRlbnRfZGlzYWJsZWRcIik7XHJcbiAgY29udGVudFNlbGVjdG9yLnN0eWxlLm92ZXJmbG93ID1cclxuICAgIGNvbnRlbnRTZWxlY3Rvci5zdHlsZS5vdmVyZmxvdyA9PT0gXCJoaWRkZW5cIiA/IFwiYXV0b1wiIDogXCJoaWRkZW5cIjtcclxuICBjb250ZW50U2VsZWN0b3Iuc3R5bGUud2lkdGggPSBgY2FsYygxMDAlIC0gJHtzY3JvbGxiYXJXaWR0aH1weClgO1xyXG59O1xyXG4vLyBkaXNwbGF5IGVkaXQgcHJvZmlsZSBwaWN0dXJlIGJ1dHRvblxyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVBY3RpdmUgPSAoKSA9PiB7XHJcbiAgcHJvZmlsZUVkaXRTZWxlY3Rvci5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiO1xyXG59O1xyXG4vLyByZW1vdmUgZWRpdCBwcm9maWxlIHBpY3R1cmUgYnV0dG9uXHJcbmV4cG9ydCBjb25zdCBlZGl0UHJvZmlsZUluYWN0aXZlID0gKCkgPT4ge1xyXG4gIHByb2ZpbGVFZGl0U2VsZWN0b3Iuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiO1xyXG59O1xyXG4iLCJpbXBvcnQgeyBwYWdlU2V0dGluZ3MgfSBmcm9tIFwiLi4vdXRpbHMvdXRpbHNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cCkge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cDtcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIHRoaXMuX2NsYXNzID0gdGhpcy5fcG9wdXAucmVwbGFjZShcIiNcIiwgXCIuXCIpLnJlcGxhY2UoXCItdGVtcGxhdGVcIiwgXCJcIik7XHJcblxyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fcG9wdXApXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2xhc3MpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX3BvcHVwRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NDbG9zZShldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiICYmIGRvY3VtZW50LmNvbnRhaW5zKHRoaXMuX2VsZW1lbnQpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYW5kbGVDbGlja091dENsb3NlKGV2dCkge1xyXG4gICAgaWYgKCF0aGlzLl9lbGVtZW50LmNvbnRhaW5zKGV2dC50YXJnZXQpKSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICBwYWdlU2V0dGluZ3MoKTtcclxuICAgICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgICAgdGhpcy5fZWxlbWVudC5jbGFzc0xpc3QudG9nZ2xlKFwicG9wdXBcIik7XHJcbiAgICB9LCAxMDApO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBwYWdlU2V0dGluZ3MoKTtcclxuICAgIHRoaXMuX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuX19jbG9zZVwiKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlRm4gPSAoZXZ0KSA9PiB0aGlzLl9oYW5kbGVFc2NDbG9zZShldnQpO1xyXG4gICAgdGhpcy5faGFuZGxlQ2xpY2tPdXRDbG9zZUZuID0gKGV2dCkgPT4gdGhpcy5faGFuZGxlQ2xpY2tPdXRDbG9zZShldnQpO1xyXG5cclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2VGbik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZUNsaWNrT3V0Q2xvc2VGbik7XHJcbiAgfVxyXG5cclxuICBfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZUZuKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtb3VzZWRvd25cIiwgdGhpcy5faGFuZGxlQ2xpY2tPdXRDbG9zZUZuKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhDb25maXJtYXRpb24gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBoYW5kbGVFdmVudFN1Ym1pdCB9LCBwb3B1cCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5faGFuZGxlRXZlbnRTdWJtaXQgPSBoYW5kbGVFdmVudFN1Ym1pdDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHN1cGVyLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5feWVzQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl9fc3VibWl0XCIpO1xyXG5cclxuICAgIHRoaXMuX3llc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRXZlbnRTdWJtaXQpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBoYW5kbGVFdmVudFN1Ym1pdCB9LCBwb3B1cCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5faGFuZGxlRXZlbnRTdWJtaXQgPSBoYW5kbGVFdmVudFN1Ym1pdDtcclxuICB9XHJcblxyXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBzYXZlKSB7XHJcbiAgICBpZiAoaXNMb2FkaW5nKSB7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5fX3N1Ym1pdFwiKS50ZXh0Q29udGVudCA9IFwiTWVueWltcGFuLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuX19zdWJtaXRcIikudGV4dENvbnRlbnQgPSBzYXZlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG5cclxuICAgIEFycmF5LmZyb20odGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm1fX2lucHV0XCIpKS5mb3JFYWNoKFxyXG4gICAgICAoaW5wdXQpID0+IHtcclxuICAgICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICAgIH1cclxuICAgICk7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1WYWx1ZXM7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2VsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVFdmVudFN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKGRhdGEsIHBvcHVwKSB7XHJcbiAgICBzdXBlcihwb3B1cCk7XHJcbiAgICB0aGlzLl9pbWFnZSA9IGRhdGEuc3JjO1xyXG4gICAgdGhpcy5fdGV4dCA9IGRhdGEuYWx0O1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHN1cGVyLm9wZW4oKTtcclxuXHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2hvdy1waWN0dXJlX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9pbWFnZTtcclxuICAgIHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaG93LXBpY3R1cmVfX2ltYWdlXCIpLmFsdCA9IHRoaXMuX3RleHQ7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2hvdy1waWN0dXJlX190ZXh0XCIpLnRleHRDb250ZW50ID0gdGhpcy5fdGV4dDtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIGFkZEl0ZW0oZWxlbWVudCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmFwcGVuZChlbGVtZW50KTtcclxuICB9XHJcblxyXG4gIGNsZWFyKCkge1xyXG4gICAgdGhpcy5fY29udGFpbmVyLmlubmVySFRNTCA9IFwiXCI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJJdGVtcygpIHtcclxuICAgIGlmIChBcnJheS5pc0FycmF5KHRoaXMuX3JlbmRlcmVkSXRlbXMpKSB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVkSXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKHRoaXMuX3JlbmRlcmVkSXRlbXMpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XHJcbiAgY29uc3RydWN0b3IoeyB1c2VyTmFtZSwgdXNlckFib3V0IH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lID0gdXNlck5hbWU7XHJcbiAgICB0aGlzLl91c2VyQWJvdXQgPSB1c2VyQWJvdXQ7XHJcbiAgfVxyXG5cclxuICBnZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIG5hbWU6IHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50LFxyXG4gICAgICBhYm91dDogdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50LFxyXG4gICAgfTtcclxuICB9XHJcblxyXG4gIHNldFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xyXG4gICAgdGhpcy5fdXNlckFib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBcIi4uL3N0eWxlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IEFwaSBmcm9tIFwiLi4vY29tcG9uZW50cy9BcGkuanNcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcclxuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XHJcbmltcG9ydCB7IGVkaXRQcm9maWxlQWN0aXZlLCBlZGl0UHJvZmlsZUluYWN0aXZlIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzLmpzXCI7XHJcbmltcG9ydCB7XHJcbiAgdmFsaWRhdGlvbkVsZW1lbnRzLFxyXG4gIGNvbnRlbnQsXHJcbiAgZWxlbWVudCxcclxuICBjYXJkVGVtcGxhdGUsXHJcbiAgcHJvZmlsZVRlbXBsYXRlLFxyXG4gIGVkaXRUZW1wbGF0ZSxcclxuICBhZGRUZW1wbGF0ZSxcclxuICBkZWxldGVDYXJkVGVtcGxhdGUsXHJcbiAgc2hvd1BpY3R1cmVUZW1wbGF0ZSxcclxuICBlZGl0QnV0dG9uU2VsZWN0b3IsXHJcbiAgYWRkQnV0dG9uU2VsZWN0b3IsXHJcbiAgcHJvZmlsZVVzZXJTZWxlY3RvcixcclxuICBwcm9maWxlQWJvdXRTZWxlY3RvcixcclxuICBwcm9maWxlUGljdHVyZVNlbGVjdG9yLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuLy8gaW5pdGlhbGl6ZSBjYXJkcyBhcGlcclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC5ub21vcmVwYXJ0aWVzLmNvL3YxL3dlYl9pZG5fMDJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjAwOGMxYzU1LTNiNTYtNDZmNi05NjA1LWExMGNhYzRiY2RjZVwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcbi8vIHJlbmRlcmluZyBjYXJkcyB0byBwYWdlXHJcbmxldCBjYXJkTGlzdDtcclxuXHJcbmFwaVxyXG4gIC5nZXRJbml0aWFsSW5mbygpXHJcbiAgLnRoZW4oKFtjYXJkcywgdXNlcl0pID0+IHtcclxuICAgIHByb2ZpbGVQaWN0dXJlU2VsZWN0b3Iuc3JjID0gdXNlci5hdmF0YXI7XHJcbiAgICB1c2VySW5mby5zZXRVc2VySW5mbyh7IG5hbWU6IHVzZXIubmFtZSwgYWJvdXQ6IHVzZXIuYWJvdXQgfSk7XHJcbiAgICBjYXJkTGlzdCA9IG5ldyBTZWN0aW9uKFxyXG4gICAgICB7XHJcbiAgICAgICAgaXRlbXM6IGNhcmRzLFxyXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICAgICAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgaGFuZGxlQ2FyZENsaWNrOiAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcG9wdXBJbWFnZShlKTtcclxuICAgICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgICBoYW5kbGVEZWxldGVDbGljazogKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbmZpcm1EZWxldGUoaXRlbSwgY2FyZCwgZSk7XHJcbiAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FyZC5pc0xpa2VkKCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0ubGlrZXMucHVzaCh1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgY2FyZC50b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgICAgICAgIC5saWtlQ2FyZChpdGVtLl9pZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBpdGVtLmxpa2VzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICBjYXJkLnRvZ2dsZUxpa2UoKTtcclxuICAgICAgICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgICAgICAgLmRpc2xpa2VDYXJkKGl0ZW0uX2lkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKClcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpdGVtLFxyXG4gICAgICAgICAgICBjYXJkVGVtcGxhdGVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBlbGVtZW50XHJcbiAgICApO1xyXG4gICAgY2FyZExpc3QuY2xlYXIoKTtcclxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuLy8gZ2V0IGN1cnJlbnQgdXNlciBpbmZvXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZTogcHJvZmlsZVVzZXJTZWxlY3RvcixcclxuICB1c2VyQWJvdXQ6IHByb2ZpbGVBYm91dFNlbGVjdG9yLFxyXG59KTtcclxuLy8gcG9wdXAgYWRkIG1vZGFsXHJcbmNvbnN0IHBvcHVwUHJvZmlsZUZvcm0gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogcHJvZmlsZVRlbXBsYXRlLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBvcHVwV2luZG93cyA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGhhbmRsZUV2ZW50U3VibWl0OiAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcG9wdXBXaW5kb3dzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5zZXRVc2VyUGljdHVyZSh2YWx1ZS5saW5rKVxyXG4gICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcm9maWxlUGljdHVyZVNlbGVjdG9yLnNyYyA9IGRhdGEuYXZhdGFyO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFdpbmRvd3MucmVuZGVyTG9hZGluZyhmYWxzZSwgXCJTaW1wYW5cIik7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFdpbmRvd3MuY2xvc2UoKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpdGVtXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHNob3dGb3JtTW9kYWwgPSBwb3B1cFdpbmRvd3Mub3BlbigpO1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkVsZW1lbnRzLCBzaG93Rm9ybU1vZGFsKTtcclxuICAgICAgdmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgICAgIHBvcHVwUHJvZmlsZUZvcm0uYWRkSXRlbShzaG93Rm9ybU1vZGFsKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjb250ZW50XHJcbik7XHJcbi8vIHBvcHVwIGVkaXQgbW9kYWxcclxuY29uc3QgcG9wdXBFZGl0Rm9ybSA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBlZGl0VGVtcGxhdGUsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgcG9wdXBXaW5kb3dzID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaGFuZGxlRXZlbnRTdWJtaXQ6ICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBwb3B1cFdpbmRvd3MucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiB2YWx1ZS5uYW1lLCBhYm91dDogdmFsdWUudGl0bGUgfSk7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5zZXRVc2VySW5mbyh2YWx1ZSlcclxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7fSlcclxuICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2luZG93cy5yZW5kZXJMb2FkaW5nKGZhbHNlLCBcIlNpbXBhblwiKTtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2luZG93cy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW1cclxuICAgICAgKTtcclxuICAgICAgY29uc3Qgc2hvd0Zvcm1Nb2RhbCA9IHBvcHVwV2luZG93cy5vcGVuKCk7XHJcbiAgICAgIGNvbnN0IGdldEluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgICBjb25zdCBuYW1lVmFsdWUgPSBzaG93Rm9ybU1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJuYW1lXCJdJyk7XHJcbiAgICAgIGNvbnN0IGFib3V0VmFsdWUgPSBzaG93Rm9ybU1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJ0aXRsZVwiXScpO1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkVsZW1lbnRzLCBzaG93Rm9ybU1vZGFsKTtcclxuICAgICAgdmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIG5hbWVWYWx1ZS52YWx1ZSA9IGdldEluZm8ubmFtZTtcclxuICAgICAgICBhYm91dFZhbHVlLnZhbHVlID0gZ2V0SW5mby5hYm91dDtcclxuICAgICAgfSwgMTAwKTtcclxuICAgICAgcG9wdXBFZGl0Rm9ybS5hZGRJdGVtKHNob3dGb3JtTW9kYWwpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNvbnRlbnRcclxuKTtcclxuLy8gcG9wdXAgYWRkIG1vZGFsXHJcbmNvbnN0IHBvcHVwQWRkRm9ybSA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBhZGRUZW1wbGF0ZSxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBwb3B1cFdpbmRvd3MgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAgICAgICB7XHJcbiAgICAgICAgICBoYW5kbGVFdmVudFN1Ym1pdDogKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwV2luZG93cy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdDYXJkID0ge1xyXG4gICAgICAgICAgICAgIG5hbWU6IHZhbHVlLnRpdGxlLFxyXG4gICAgICAgICAgICAgIGxpbms6IHZhbHVlLmxpbmssXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5wb3N0Q2FyZChuZXdDYXJkKVxyXG4gICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkTGlzdC5fcmVuZGVyZWRJdGVtcy51bnNoaWZ0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgY2FyZExpc3QuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2luZG93cy5yZW5kZXJMb2FkaW5nKGZhbHNlLCBcIlNpbXBhblwiKTtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2luZG93cy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW1cclxuICAgICAgKTtcclxuICAgICAgY29uc3Qgc2hvd0Zvcm1Nb2RhbCA9IHBvcHVwV2luZG93cy5vcGVuKCk7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uRWxlbWVudHMsIHNob3dGb3JtTW9kYWwpO1xyXG4gICAgICB2YWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICAgICAgcG9wdXBBZGRGb3JtLmFkZEl0ZW0oc2hvd0Zvcm1Nb2RhbCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY29udGVudFxyXG4pO1xyXG4vLyBwb3B1cCBhZGQgbW9kYWxcclxuY29uc3QgY29uZmlybURlbGV0ZSA9IChlbGVtLCBkYXRhLCBldmVudCkgPT4ge1xyXG4gIGNvbnN0IGRlbGV0ZUNhcmRNb2RhbCA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogZGVsZXRlQ2FyZFRlbXBsYXRlLFxyXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBwb3B1cFdpbmRvd3MgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBoYW5kbGVFdmVudFN1Ym1pdDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGRhdGEuZGVsZXRlQ2FyZChldmVudCk7XHJcbiAgICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgICAuZGVsZXRlQ2FyZChlbGVtLl9pZClcclxuICAgICAgICAgICAgICAgIC50aGVuKClcclxuICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBwb3B1cFdpbmRvd3MuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBpdGVtXHJcbiAgICAgICAgKTtcclxuICAgICAgICBjb25zdCBzaG93Rm9ybU1vZGFsID0gcG9wdXBXaW5kb3dzLm9wZW4oKTtcclxuICAgICAgICBkZWxldGVDYXJkTW9kYWwuYWRkSXRlbShzaG93Rm9ybU1vZGFsKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBjb250ZW50XHJcbiAgKTtcclxuICBkZWxldGVDYXJkTW9kYWwucmVuZGVySXRlbXMoKTtcclxufTtcclxuXHJcbi8vIHBvcHVwIGltYWdlIG1vZGFsXHJcbmNvbnN0IHBvcHVwSW1hZ2UgPSAoZXZ0KSA9PiB7XHJcbiAgY29uc3Qgc2hvd1BvcHVwID0gbmV3IFNlY3Rpb24oXHJcbiAgICB7XHJcbiAgICAgIGl0ZW1zOiBldnQudGFyZ2V0LFxyXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBpbWFnZU1vZGFsID0gbmV3IFBvcHVwV2l0aEltYWdlKGl0ZW0sIHNob3dQaWN0dXJlVGVtcGxhdGUpO1xyXG4gICAgICAgIGNvbnN0IHNob3dJbWFnZU1vZGFsID0gaW1hZ2VNb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgc2hvd1BvcHVwLmFkZEl0ZW0oc2hvd0ltYWdlTW9kYWwpO1xyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIGNvbnRlbnRcclxuICApO1xyXG4gIHNob3dQb3B1cC5yZW5kZXJJdGVtcygpO1xyXG59O1xyXG4vLyBnbG9iYWwgZXZlbnQgbGlzdGVuZXJzXHJcbnByb2ZpbGVQaWN0dXJlU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cFByb2ZpbGVGb3JtLnJlbmRlckl0ZW1zKCk7XHJcbn0pO1xyXG5lZGl0QnV0dG9uU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEVkaXRGb3JtLnJlbmRlckl0ZW1zKCk7XHJcbn0pO1xyXG5hZGRCdXR0b25TZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIHBvcHVwQWRkRm9ybS5yZW5kZXJJdGVtcygpO1xyXG59KTtcclxucHJvZmlsZVBpY3R1cmVTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdmVyXCIsIGVkaXRQcm9maWxlQWN0aXZlKTtcclxucHJvZmlsZVBpY3R1cmVTZWxlY3Rvci5hZGRFdmVudExpc3RlbmVyKFwibW91c2VvdXRcIiwgZWRpdFByb2ZpbGVJbmFjdGl2ZSk7XHJcbiJdLCJuYW1lcyI6WyJBcGkiLCJfcmVmIiwiYmFzZVVybCIsImhlYWRlcnMiLCJfY2xhc3NDYWxsQ2hlY2siLCJ0aGlzIiwiX2Jhc2VVcmwiLCJfaGVhZGVycyIsImtleSIsInZhbHVlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsImNvbmNhdCIsInN0YXR1cyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwiYWxsIiwiX2dldEluaXRpYWxDYXJkIiwiX2dldFVzZXJJbmZvIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhdmF0YXIiLCJuYW1lIiwiYWJvdXQiLCJ0aXRsZSIsImNhcmRJZCIsIkNhcmQiLCJkYXRhIiwiY2FyZFNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlRGVsZXRlQ2xpY2siLCJoYW5kbGVMaWtlQ2xpY2siLCJfbmFtZSIsIl9saW5rIiwibGluayIsIl9saWtlcyIsImxpa2VzIiwiX293bmVyIiwib3duZXIiLCJfY2FyZFNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVEZWxldGVDbGljayIsIl9oYW5kbGVMaWtlQ2xpY2siLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiX2VsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJfaW1hZ2UiLCJfaW1hZ2VUZXh0IiwiX2NhcmRMaWtlcyIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwibGVuZ3RoIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2luaXRpYWxMaWtlU3RhdGUiLCJlIiwidGFyZ2V0IiwiY2xvc2VzdCIsInJlbW92ZSIsIl9oZWFydEJ1dHRvbiIsImNsYXNzTGlzdCIsInRvZ2dsZSIsImlzTGlrZWQiLCJhZGQiLCJfdGhpcyIsInNvbWUiLCJsaWtlIiwiX2lkIiwiX2RlbGV0ZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJGb3JtVmFsaWRhdG9yIiwiaXRlbXMiLCJmb3JtRWxlbWVudCIsIl9mb3JtSW5wdXRTZWxlY3RvciIsImZvcm1JbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5wdXRFcnJvck1vZGlmaWVyIiwiaW5wdXRFcnJvck1vZGlmaWVyIiwiX2Vycm9yTW9kaWZpZXIiLCJlcnJvck1vZGlmaWVyIiwiX2J1dHRvbkVycm9yTW9kaWZpZXIiLCJidXR0b25FcnJvck1vZGlmaWVyIiwiX2Zvcm1FbGVtZW50IiwiaW5wdXRFbGVtZW50IiwiZXJyb3JFbGVtZW50IiwiaWQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJfaW5wdXRMaXN0IiwiX2hhc0lucHV0SW52YWxpZCIsIl9idXR0b24iLCJkaXNhYmxlZCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiX2NoZWNrSW5wdXRWYWxpZGl0eSIsInZhbGlkYXRpb25FbGVtZW50cyIsInByb2ZpbGVVc2VyU2VsZWN0b3IiLCJwcm9maWxlQWJvdXRTZWxlY3RvciIsImNvbnRlbnRTZWxlY3RvciIsIm1haW5Db250ZW50U2VsZWN0b3IiLCJlZGl0QnV0dG9uU2VsZWN0b3IiLCJhZGRCdXR0b25TZWxlY3RvciIsInByb2ZpbGVQaWN0dXJlU2VsZWN0b3IiLCJwcm9maWxlRWRpdFNlbGVjdG9yIiwicGFnZVNldHRpbmdzIiwic2Nyb2xsYmFyV2lkdGgiLCJ3aW5kb3ciLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiY2xpZW50V2lkdGgiLCJzdHlsZSIsIm92ZXJmbG93Iiwid2lkdGgiLCJQb3B1cCIsInBvcHVwIiwiX3BvcHVwIiwiX2NsYXNzIiwicmVwbGFjZSIsIl9wb3B1cEVsZW1lbnQiLCJldnQiLCJjb250YWlucyIsImNsb3NlIiwic2V0VGltZW91dCIsIl9yZW1vdmVFdmVudExpc3RlbmVycyIsIl90aGlzMiIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZUZuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiX2hhbmRsZUNsaWNrT3V0Q2xvc2VGbiIsIl9oYW5kbGVDbGlja091dENsb3NlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIlBvcHVwV2l0aENvbmZpcm1hdGlvbiIsIl9Qb3B1cCIsIl9pbmhlcml0cyIsIl9zdXBlciIsImhhbmRsZUV2ZW50U3VibWl0IiwiY2FsbCIsIl9oYW5kbGVFdmVudFN1Ym1pdCIsIl9nZXQiLCJfZ2V0UHJvdG90eXBlT2YiLCJwcm90b3R5cGUiLCJfeWVzQnV0dG9uIiwiUG9wdXBXaXRoRm9ybSIsImlzTG9hZGluZyIsInNhdmUiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwiX3RoaXMzIiwicHJldmVudERlZmF1bHQiLCJfZ2V0SW5wdXRWYWx1ZXMiLCJQb3B1cFdpdGhJbWFnZSIsIl90ZXh0IiwiU2VjdGlvbiIsImNvbnRhaW5lclNlbGVjdG9yIiwicmVuZGVyZXIiLCJfcmVuZGVyZWRJdGVtcyIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwiYXBwZW5kIiwiaW5uZXJIVE1MIiwiaXNBcnJheSIsIml0ZW0iLCJVc2VySW5mbyIsInVzZXJOYW1lIiwidXNlckFib3V0IiwiX3VzZXJOYW1lIiwiX3VzZXJBYm91dCIsIl9yZWYyIiwiY2FyZExpc3QiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwiZ2V0SW5pdGlhbEluZm8iLCJjYXJkcyIsInVzZXIiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwiY2FyZCIsInBvcHVwSW1hZ2UiLCJjb25maXJtRGVsZXRlIiwicHVzaCIsInRvZ2dsZUxpa2UiLCJsaWtlQ2FyZCIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInBvcCIsImRpc2xpa2VDYXJkIiwiY2FyZEVsZW1lbnQiLCJnZW5lcmF0ZUNhcmQiLCJhZGRJdGVtIiwiY2xlYXIiLCJyZW5kZXJJdGVtcyIsInBvcHVwUHJvZmlsZUZvcm0iLCJwb3B1cFdpbmRvd3MiLCJyZW5kZXJMb2FkaW5nIiwic2V0VXNlclBpY3R1cmUiLCJmaW5hbGx5Iiwic2hvd0Zvcm1Nb2RhbCIsIm9wZW4iLCJlbmFibGVWYWxpZGF0aW9uIiwicG9wdXBFZGl0Rm9ybSIsImdldEluZm8iLCJnZXRVc2VySW5mbyIsIm5hbWVWYWx1ZSIsImFib3V0VmFsdWUiLCJwb3B1cEFkZEZvcm0iLCJuZXdDYXJkIiwicG9zdENhcmQiLCJ1bnNoaWZ0IiwiZWxlbSIsImV2ZW50IiwiZGVsZXRlQ2FyZE1vZGFsIiwiZGVsZXRlQ2FyZCIsInNob3dQb3B1cCIsInNob3dJbWFnZU1vZGFsIiwiZGlzcGxheSJdLCJzb3VyY2VSb290IjoiIn0=
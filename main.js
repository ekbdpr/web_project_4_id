!function(){"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,i=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(i)?i:String(i)),o)}var i}var n=function(){function e(t){var n=t.baseUrl,r=t.headers;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=n,this._headers=r}var n,r;return n=e,(r=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"_getInitialCard",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"_getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{method:"GET",headers:this._headers}).then(this._checkResponse)}},{key:"getInitialInfo",value:function(){return Promise.all([this._getInitialCard(),this._getUserInfo()])}},{key:"setUserPicture",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",body:JSON.stringify({avatar:e}),headers:this._headers}).then(this._checkResponse)}},{key:"setUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",body:JSON.stringify({name:e.name,about:e.title}),headers:this._headers}).then(this._checkResponse)}},{key:"postCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",body:JSON.stringify(e),headers:this._headers}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"dislikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}])&&t(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),e}();function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==r(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var o=n.call(e,"string");if("object"!==r(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===r(i)?i:String(i)),o)}var i}var i=function(){function e(t,n,r){var o=t.handleCardClick,i=t.handleDeleteClick,u=t.handleLikeClick;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._name=n.name,this._link=n.link,this._likes=n.likes,this._owner=n.owner,this._cardSelector=r,this._handleCardClick=o,this._handleDeleteClick=i,this._handleLikeClick=u}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return document.querySelector(this._cardSelector).content.querySelector(".element__item").cloneNode(!0)}},{key:"generateCard",value:function(){return this._element=this._getTemplate(),this._image=this._element.querySelector(".element__image"),this._imageText=this._element.querySelector(".element__text"),this._cardLikes=this._element.querySelector(".element__like-counts"),this._image.src=this._link,this._image.alt=this._name,this._imageText.textContent=this._name,this._cardLikes.textContent=this._likes.length,this._setEventListeners(),this._initialLikeState(),this._element}},{key:"deleteCard",value:function(e){e.target.closest(".element__item").remove()}},{key:"toggleLike",value:function(){this._heartButton=this._element.querySelector(".element__heart-btn"),this._cardLikes=this._element.querySelector(".element__like-counts"),this._heartButton.classList.toggle("element__heart-btn_active"),this._cardLikes.textContent=this._likes.length}},{key:"_initialLikeState",value:function(){this.isLiked()?this._heartButton.classList.add("element__heart-btn_active"):this._heartButton.classList.remove("element__heart-btn_active")}},{key:"isLiked",value:function(){var e=this;return this._likes.some((function(t){return t._id===e._owner._id}))}},{key:"_setEventListeners",value:function(){this._heartButton=this._element.querySelector(".element__heart-btn"),this._deleteButton=this._element.querySelector(".element__delete-btn"),this._heartButton.addEventListener("click",this._handleLikeClick),this._deleteButton.addEventListener("click",this._handleDeleteClick),this._image.addEventListener("click",this._handleCardClick)}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===u(o)?o:String(o)),r)}var o}var l=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._formInputSelector=t.formInputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inputErrorModifier=t.inputErrorModifier,this._errorModifier=t.errorModifier,this._buttonErrorModifier=t.buttonErrorModifier,this._formElement=n}var t,n;return t=e,(n=[{key:"_showInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.add(this._errorModifier),t.classList.add(this._inputErrorModifier),t.textContent=e.validationMessage}},{key:"_hideInputError",value:function(e){var t=this._formElement.querySelector(".".concat(e.id,"-error"));e.classList.remove(this._errorModifier),t.classList.remove(this._inputErrorModifier),t.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_hasInputInvalid",value:function(){return this._inputList.some((function(e){return!e.validity.valid}))}},{key:"_toggleButtonState",value:function(){this._hasInputInvalid()?(this._button.classList.add(this._buttonErrorModifier),this._button.disabled=!0):(this._button.classList.remove(this._buttonErrorModifier),this._button.disabled=!1)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList=Array.from(this._formElement.querySelectorAll(this._formInputSelector)),this._button=this._formElement.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))}))}},{key:"enableValidation",value:function(){this._setEventListeners()}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),a={formInputSelector:".form__input",submitButtonSelector:".btn__submit",inputErrorModifier:"form__input-error",errorModifier:"form__input_type_error",buttonErrorModifier:"btn_inactive"},s=document.querySelector(".profile__username"),f=document.querySelector(".profile__about"),h=document.querySelector(".content"),y=document.querySelector(".main-content"),d=document.querySelector(".btn_edit"),p=document.querySelector(".btn_add"),m=document.querySelector(".profile__picture"),b=document.querySelector(".profile__picture-edit"),v=".content",_=function(){var e=window.innerWidth-document.documentElement.clientWidth;y.classList.toggle("main-content_disabled"),h.style.overflow="hidden"===h.style.overflow?"auto":"hidden",h.style.width="calc(100% - ".concat(e,"px)")};function g(e){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},g(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==g(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==g(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===g(o)?o:String(o)),r)}var o}var k=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=t}var t,n;return t=e,(n=[{key:"_getTemplate",value:function(){return this._class=this._popup.replace("#",".").replace("-template",""),this._popupElement=document.querySelector(this._popup).content.querySelector(this._class).cloneNode(!0),this._popupElement}},{key:"_handleEscClose",value:function(e){"Escape"===e.key&&document.contains(this._element)&&this.close()}},{key:"_handleClickOutClose",value:function(e){this._element.contains(e.target)||this.close()}},{key:"open",value:function(){var e=this;return this._element=this._getTemplate(),setTimeout((function(){_(),e._setEventListeners(),e._element.classList.toggle("popup")}),100),this._element}},{key:"close",value:function(){_(),this._removeEventListeners(),this._element.remove()}},{key:"_setEventListeners",value:function(){var e=this;this._closeButton=this._element.querySelector(".btn__close"),this._handleEscCloseFn=function(t){return e._handleEscClose(t)},this._handleClickOutCloseFn=function(t){return e._handleClickOutClose(t)},this._closeButton.addEventListener("click",(function(){return e.close()})),document.addEventListener("keydown",this._handleEscCloseFn),document.addEventListener("mousedown",this._handleClickOutCloseFn)}},{key:"_removeEventListeners",value:function(){document.removeEventListener("keydown",this._handleEscCloseFn),document.removeEventListener("mousedown",this._handleClickOutCloseFn)}}])&&S(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function w(e){return w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},w(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==w(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==w(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===w(o)?o:String(o)),r)}var o}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=P(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},O.apply(this,arguments)}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=P(r);if(o){var n=P(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n,r=e.handleEventSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleEventSubmit=r,n}return t=u,(n=[{key:"_setEventListeners",value:function(){O(P(u.prototype),"_setEventListeners",this).call(this),this._yesButton=this._element.querySelector(".btn__submit"),this._yesButton.addEventListener("click",this._handleEventSubmit)}}])&&E(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(k);function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===L(o)?o:String(o)),r)}var o}function T(){return T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=q(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},T.apply(this,arguments)}function R(e,t){return R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},R(e,t)}function q(e){return q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},q(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&R(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=q(r);if(o){var n=q(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n,r=e.handleEventSubmit;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._handleEventSubmit=r,n}return t=u,(n=[{key:"renderLoading",value:function(e,t){this._element.querySelector(".btn__submit").textContent=e?"Menyimpan...":t}},{key:"_getInputValues",value:function(){var e=this;return this._formValues={},Array.from(this._element.querySelectorAll(".form__input")).forEach((function(t){e._formValues[t.name]=t.value})),this._formValues}},{key:"_setEventListeners",value:function(){var e=this;T(q(u.prototype),"_setEventListeners",this).call(this),this._element.addEventListener("submit",(function(t){t.preventDefault(),e._handleEventSubmit(e._getInputValues())}))}}])&&I(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(k);function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===B(o)?o:String(o)),r)}var o}function A(){return A="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=D(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},A.apply(this,arguments)}function M(e,t){return M=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},M(e,t)}function D(e){return D=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},D(e)}var V=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&M(e,t)}(u,e);var t,n,r,o,i=(r=u,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=D(r);if(o){var n=D(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===B(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(n=i.call(this,t))._image=e.src,n._text=e.alt,n}return t=u,(n=[{key:"open",value:function(){return A(D(u.prototype),"open",this).call(this),this._element.querySelector(".show-picture__image").src=this._image,this._element.querySelector(".show-picture__image").alt=this._text,this._element.querySelector(".show-picture__text").textContent=this._text,this._element}}])&&U(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),u}(k);function N(e){return N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==N(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==N(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===N(o)?o:String(o)),r)}var o}var H=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._renderedItems=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.append(e)}},{key:"clear",value:function(){this._container.innerHTML=""}},{key:"renderItems",value:function(){var e=this;Array.isArray(this._renderedItems)?this._renderedItems.forEach((function(t){e._renderer(t)})):this._renderer(this._renderedItems)}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==J(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===J(o)?o:String(o)),r)}var o}var W=function(){function e(t){var n=t.userName,r=t.userAbout;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=n,this._userAbout=r}var t,n;return t=e,(n=[{key:"getUserInfo",value:function(){return{name:this._userName.textContent,about:this._userAbout.textContent}}},{key:"setUserInfo",value:function(e){var t=e.name,n=e.about;this._userName.textContent=t,this._userAbout.textContent=n}}])&&G(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $,K=new n({baseUrl:"https://around.nomoreparties.co/v1/web_idn_02",headers:{authorization:"008c1c55-3b56-46f6-9605-a10cac4bcdce","Content-Type":"application/json"}});K.getInitialInfo().then((function(e){var t,n,r=(n=2,function(e){if(Array.isArray(e))return e}(t=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,u,c=[],l=!0,a=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);l=!0);}catch(e){a=!0,o=e}finally{try{if(!l&&null!=n.return&&(u=n.return(),Object(u)!==u))return}finally{if(a)throw o}}return c}}(t,n)||function(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=r[0],u=r[1];m.src=u.avatar,Q.setUserInfo({name:u.name,about:u.about}),($=new H({items:o,renderer:function(e){var t=new i({handleCardClick:function(e){te(e)},handleDeleteClick:function(n){ee(t,n),K.deleteCard(e._id).then().catch((function(e){console.log(e)}))},handleLikeClick:function(){!1===t.isLiked()?(e.likes.push(u),t.toggleLike(),K.likeCard(e._id).then().catch((function(e){console.log(e)}))):(e.likes.pop(),t.toggleLike(),K.dislikeCard(e._id).then().catch((function(e){console.log(e)})))}},e,"#card-template"),n=t.generateCard();$.addItem(n)}},".element")).clear(),$.renderItems()})).catch((function(e){console.log(e)}));var Q=new W({userName:s,userAbout:f}),X=new H({items:"#profile-picture-template",renderer:function(e){var t=new x({handleEventSubmit:function(e){t.renderLoading(!0),K.setUserPicture(e.link).then((function(e){m.src=e.avatar})).catch((function(e){console.log(e)})).finally((function(){t.renderLoading(!1,"Simpan"),t.close()}))}},e),n=t.open();new l(a,n).enableValidation(),X.addItem(n)}},v),Y=new H({items:"#edit-profile-template",renderer:function(e){var t=new x({handleEventSubmit:function(e){t.renderLoading(!0),Q.setUserInfo({name:e.name,about:e.title}),K.setUserInfo(e).then((function(){})).catch((function(e){console.log(e)})).finally((function(){t.renderLoading(!1,"Simpan"),t.close()}))}},e),n=t.open(),r=Q.getUserInfo(),o=n.querySelector('input[name="name"]'),i=n.querySelector('input[name="title"]');new l(a,n).enableValidation(),setTimeout((function(){o.value=r.name,i.value=r.about}),100),Y.addItem(n)}},v),Z=new H({items:"#add-card-template",renderer:function(e){var t=new x({handleEventSubmit:function(e){t.renderLoading(!0);var n={name:e.title,link:e.link};K.postCard(n).then((function(e){$._renderedItems.unshift(e),$.clear(),$.renderItems()})).catch((function(e){console.log(e)})).finally((function(){t.renderLoading(!1,"Simpan"),t.close()}))}},e),n=t.open();new l(a,n).enableValidation(),Z.addItem(n)}},v),ee=function(e,t){var n=new H({items:"#del-confirm-template",renderer:function(r){var o=new C({handleEventSubmit:function(){e.deleteCard(t),o.close()}},r),i=o.open();n.addItem(i)}},v);n.renderItems()},te=function(e){var t=new H({items:e.target,renderer:function(e){var n=new V(e,"#show-picture-template").open();t.addItem(n)}},v);t.renderItems()};m.addEventListener("click",(function(){X.renderItems()})),d.addEventListener("click",(function(){Y.renderItems()})),p.addEventListener("click",(function(){Z.renderItems()})),m.addEventListener("mouseover",(function(){b.style.display="block"})),m.addEventListener("mouseout",(function(){b.style.display="none"}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0FDbkNZLEVBQWdCckIsUUFBUVEsRUFDMUIsR0FFRnJLLEdBRUZrTCxFQUFnQm5CLGFBQ2xCLEVBR01oQixHQUFhLFNBQUMzRCxHQUNsQixJQUFNK0YsRUFBWSxJQUFJOUQsRUFDcEIsQ0FDRXhGLE1BQU91RCxFQUFJdEUsT0FDWHlHLFNBQVUsU0FBQ1EsR0FDVCxJQUNNcUQsRUFEYSxJQUFJakUsRUFBZVksRVJsTlgsMEJRbU5PdUMsT0FDbENhLEVBQVV0QixRQUFRdUIsRUFDcEIsR0FFRnBMLEdBRUZtTCxFQUFVcEIsYUFDWixFQUVBNUYsRUFBdUJ4QyxpQkFBaUIsU0FBUyxXQUMvQ3FJLEVBQWlCRCxhQUNuQixJQUNBOUYsRUFBbUJ0QyxpQkFBaUIsU0FBUyxXQUMzQzZJLEVBQWNULGFBQ2hCLElBQ0E3RixFQUFrQnZDLGlCQUFpQixTQUFTLFdBQzFDa0osRUFBYWQsYUFDZixJQUNBNUYsRUFBdUJ4QyxpQkFBaUIsYVB4UFAsV0FDL0J5QyxFQUFvQk8sTUFBTTBHLFFBQVUsT0FDdEMsSU91UEFsSCxFQUF1QnhDLGlCQUFpQixZUHJQTCxXQUNqQ3lDLEVBQW9CTyxNQUFNMEcsUUFBVSxNQUN0QyxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9pZC8uL3NyYy9jb21wb25lbnRzL0FwaS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2lkLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2lkLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2lkLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2lkLy4vc3JjL3V0aWxzL3V0aWxzLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2lkLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzRfaWQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2lkLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80X2lkLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNF9pZC8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBQcm9taXNlLnJlamVjdChgRXJyb3I6ICR7cmVzLnN0YXR1c31gKTtcclxuICB9XHJcblxyXG4gIF9nZXRJbml0aWFsQ2FyZCgpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIF9nZXRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkdFVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGdldEluaXRpYWxJbmZvKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLl9nZXRJbml0aWFsQ2FyZCgpLCB0aGlzLl9nZXRVc2VySW5mbygpXSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyUGljdHVyZSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBBVENIXCIsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiB2YWx1ZSB9KSxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWU6IHZhbHVlLm5hbWUsXHJcbiAgICAgICAgYWJvdXQ6IHZhbHVlLnRpdGxlLFxyXG4gICAgICB9KSxcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBwb3N0Q2FyZCh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUE9TVFwiLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh2YWx1ZSksXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG5cclxuICBkaXNsaWtlQ2FyZChjYXJkSWQpIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICAgIG1ldGhvZDogXCJERUxFVEVcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xyXG4gIGNvbnN0cnVjdG9yKFxyXG4gICAgeyBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZURlbGV0ZUNsaWNrLCBoYW5kbGVMaWtlQ2xpY2sgfSxcclxuICAgIGRhdGEsXHJcbiAgICBjYXJkU2VsZWN0b3JcclxuICApIHtcclxuICAgIHRoaXMuX25hbWUgPSBkYXRhLm5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xyXG4gICAgdGhpcy5fbGlrZXMgPSBkYXRhLmxpa2VzO1xyXG4gICAgdGhpcy5fb3duZXIgPSBkYXRhLm93bmVyO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gICAgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2sgPSBoYW5kbGVEZWxldGVDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZUxpa2VDbGljayA9IGhhbmRsZUxpa2VDbGljaztcclxuICB9XHJcblxyXG4gIF9nZXRUZW1wbGF0ZSgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2l0ZW1cIilcclxuICAgICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgICByZXR1cm4gY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2ltYWdlVGV4dCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X190ZXh0XCIpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtY291bnRzXCIpO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5faW1hZ2VUZXh0LnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuICAgIHRoaXMuX2NhcmRMaWtlcy50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5faW5pdGlhbExpa2VTdGF0ZSgpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9lbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChlKSB7XHJcbiAgICBlLnRhcmdldC5jbG9zZXN0KFwiLmVsZW1lbnRfX2l0ZW1cIikucmVtb3ZlKCk7XHJcbiAgfVxyXG5cclxuICB0b2dnbGVMaWtlKCkge1xyXG4gICAgdGhpcy5faGVhcnRCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9faGVhcnQtYnRuXCIpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2xpa2UtY291bnRzXCIpO1xyXG5cclxuICAgIHRoaXMuX2hlYXJ0QnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJlbGVtZW50X19oZWFydC1idG5fYWN0aXZlXCIpO1xyXG4gICAgdGhpcy5fY2FyZExpa2VzLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xyXG4gIH1cclxuXHJcbiAgX2luaXRpYWxMaWtlU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5pc0xpa2VkKCkpIHtcclxuICAgICAgdGhpcy5faGVhcnRCdXR0b24uY2xhc3NMaXN0LmFkZChcImVsZW1lbnRfX2hlYXJ0LWJ0bl9hY3RpdmVcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oZWFydEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKFwiZWxlbWVudF9faGVhcnQtYnRuX2FjdGl2ZVwiKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4gbGlrZS5faWQgPT09IHRoaXMuX293bmVyLl9pZCk7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9oZWFydEJ1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19oZWFydC1idG5cIik7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24gPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fZGVsZXRlLWJ0blwiKTtcclxuXHJcbiAgICB0aGlzLl9oZWFydEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUNsaWNrKTtcclxuICAgIHRoaXMuX2RlbGV0ZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlRGVsZXRlQ2xpY2spO1xyXG4gICAgdGhpcy5faW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUNhcmRDbGljayk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xyXG4gIGNvbnN0cnVjdG9yKGl0ZW1zLCBmb3JtRWxlbWVudCkge1xyXG4gICAgdGhpcy5fZm9ybUlucHV0U2VsZWN0b3IgPSBpdGVtcy5mb3JtSW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gaXRlbXMuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yTW9kaWZpZXIgPSBpdGVtcy5pbnB1dEVycm9yTW9kaWZpZXI7XHJcbiAgICB0aGlzLl9lcnJvck1vZGlmaWVyID0gaXRlbXMuZXJyb3JNb2RpZmllcjtcclxuICAgIHRoaXMuX2J1dHRvbkVycm9yTW9kaWZpZXIgPSBpdGVtcy5idXR0b25FcnJvck1vZGlmaWVyO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yTW9kaWZpZXIpO1xyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvck1vZGlmaWVyKTtcclxuICAgIGVycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIGNvbnN0IGVycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuXHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvck1vZGlmaWVyKTtcclxuICAgIGVycm9yRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JNb2RpZmllcik7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcclxuICAgIGlmICghaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2hhc0lucHV0SW52YWxpZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dExpc3Quc29tZSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiAhaW5wdXRFbGVtZW50LnZhbGlkaXR5LnZhbGlkO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5faGFzSW5wdXRJbnZhbGlkKCkpIHtcclxuICAgICAgdGhpcy5fYnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5fYnV0dG9uRXJyb3JNb2RpZmllcik7XHJcbiAgICAgIHRoaXMuX2J1dHRvbi5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9idXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9idXR0b25FcnJvck1vZGlmaWVyKTtcclxuICAgICAgdGhpcy5fYnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2Zvcm1JbnB1dFNlbGVjdG9yKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX2J1dHRvbiA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICBpbnB1dEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uRWxlbWVudHMgPSB7XHJcbiAgZm9ybUlucHV0U2VsZWN0b3I6IFwiLmZvcm1fX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmJ0bl9fc3VibWl0XCIsXHJcbiAgaW5wdXRFcnJvck1vZGlmaWVyOiBcImZvcm1fX2lucHV0LWVycm9yXCIsXHJcbiAgZXJyb3JNb2RpZmllcjogXCJmb3JtX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgYnV0dG9uRXJyb3JNb2RpZmllcjogXCJidG5faW5hY3RpdmVcIixcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCBjYXJkRWxlbWVudHMgPSB7XHJcbiAgY2FyZENvbnRhaW5lcjogXCIuZWxlbWVudF9faXRlbVwiLFxyXG4gIGNhcmRJbWFnZTogXCIuZWxlbWVudF9faW1hZ2VcIixcclxuICBjYXJkVGV4dDogXCIuZWxlbWVudF9fdGV4dFwiLFxyXG4gIGNhcmRIZWFydEJ1dHRvbjogXCIuZWxlbWVudF9faGVhcnQtYnRuXCIsXHJcbiAgY2FyZERlbGV0ZUJ1dHRvbjogXCIuZWxlbWVudF9fZGVsZXRlLWJ0blwiLFxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVVc2VyU2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3VzZXJuYW1lXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUFib3V0U2VsZWN0b3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Fib3V0XCIpO1xyXG5leHBvcnQgY29uc3QgY29udGVudFNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jb250ZW50XCIpO1xyXG5leHBvcnQgY29uc3QgbWFpbkNvbnRlbnRTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubWFpbi1jb250ZW50XCIpO1xyXG5leHBvcnQgY29uc3QgZWRpdEJ1dHRvblNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5fZWRpdFwiKTtcclxuZXhwb3J0IGNvbnN0IGFkZEJ1dHRvblNlbGVjdG9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5fYWRkXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZVBpY3R1cmVTZWxlY3RvciA9XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19waWN0dXJlXCIpO1xyXG5leHBvcnQgY29uc3QgcHJvZmlsZUVkaXRTZWxlY3RvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgXCIucHJvZmlsZV9fcGljdHVyZS1lZGl0XCJcclxuKTtcclxuXHJcbmV4cG9ydCBjb25zdCBjb250ZW50ID0gXCIuY29udGVudFwiO1xyXG5leHBvcnQgY29uc3QgZWxlbWVudCA9IFwiLmVsZW1lbnRcIjtcclxuZXhwb3J0IGNvbnN0IHByb2ZpbGVUZW1wbGF0ZSA9IFwiI3Byb2ZpbGUtcGljdHVyZS10ZW1wbGF0ZVwiO1xyXG5leHBvcnQgY29uc3QgZWRpdFRlbXBsYXRlID0gXCIjZWRpdC1wcm9maWxlLXRlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBhZGRUZW1wbGF0ZSA9IFwiI2FkZC1jYXJkLXRlbXBsYXRlXCI7XHJcbmV4cG9ydCBjb25zdCBkZWxldGVDYXJkVGVtcGxhdGUgPSBcIiNkZWwtY29uZmlybS10ZW1wbGF0ZVwiO1xyXG5leHBvcnQgY29uc3QgY2FyZFRlbXBsYXRlID0gXCIjY2FyZC10ZW1wbGF0ZVwiO1xyXG5leHBvcnQgY29uc3Qgc2hvd1BpY3R1cmVUZW1wbGF0ZSA9IFwiI3Nob3ctcGljdHVyZS10ZW1wbGF0ZVwiO1xyXG4iLCJpbXBvcnQge1xyXG4gIGNvbnRlbnRTZWxlY3RvcixcclxuICBtYWluQ29udGVudFNlbGVjdG9yLFxyXG4gIHByb2ZpbGVFZGl0U2VsZWN0b3IsXHJcbn0gZnJvbSBcIi4uL3V0aWxzL2NvbnN0YW50cy5qc1wiO1xyXG4vLyB0b2dnbGUgcGFnZSAmIHNjcm9sbGJhciB2aXNpYmlsaXR5IHdoZW4gYSBtb2RhbCB3aW5kb3cgaXMgb3BlbmVkIGFuZCBjbG9zZWRcclxuZXhwb3J0IGNvbnN0IHBhZ2VTZXR0aW5ncyA9ICgpID0+IHtcclxuICBjb25zdCBzY3JvbGxiYXJXaWR0aCA9XHJcbiAgICB3aW5kb3cuaW5uZXJXaWR0aCAtIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDtcclxuXHJcbiAgbWFpbkNvbnRlbnRTZWxlY3Rvci5jbGFzc0xpc3QudG9nZ2xlKFwibWFpbi1jb250ZW50X2Rpc2FibGVkXCIpO1xyXG4gIGNvbnRlbnRTZWxlY3Rvci5zdHlsZS5vdmVyZmxvdyA9XHJcbiAgICBjb250ZW50U2VsZWN0b3Iuc3R5bGUub3ZlcmZsb3cgPT09IFwiaGlkZGVuXCIgPyBcImF1dG9cIiA6IFwiaGlkZGVuXCI7XHJcbiAgY29udGVudFNlbGVjdG9yLnN0eWxlLndpZHRoID0gYGNhbGMoMTAwJSAtICR7c2Nyb2xsYmFyV2lkdGh9cHgpYDtcclxufTtcclxuLy8gZGlzcGxheSBlZGl0IHByb2ZpbGUgcGljdHVyZSBidXR0b25cclxuZXhwb3J0IGNvbnN0IGVkaXRQcm9maWxlQWN0aXZlID0gKCkgPT4ge1xyXG4gIHByb2ZpbGVFZGl0U2VsZWN0b3Iuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIjtcclxufTtcclxuLy8gcmVtb3ZlIGVkaXQgcHJvZmlsZSBwaWN0dXJlIGJ1dHRvblxyXG5leHBvcnQgY29uc3QgZWRpdFByb2ZpbGVJbmFjdGl2ZSA9ICgpID0+IHtcclxuICBwcm9maWxlRWRpdFNlbGVjdG9yLnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIjtcclxufTtcclxuIiwiaW1wb3J0IHsgcGFnZVNldHRpbmdzIH0gZnJvbSBcIi4uL3V0aWxzL3V0aWxzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXApIHtcclxuICAgIHRoaXMuX3BvcHVwID0gcG9wdXA7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICB0aGlzLl9jbGFzcyA9IHRoaXMuX3BvcHVwLnJlcGxhY2UoXCIjXCIsIFwiLlwiKS5yZXBsYWNlKFwiLXRlbXBsYXRlXCIsIFwiXCIpO1xyXG5cclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3BvcHVwKVxyXG4gICAgICAuY29udGVudC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NsYXNzKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9wb3B1cEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XHJcbiAgICBpZiAoZXZ0LmtleSA9PT0gXCJFc2NhcGVcIiAmJiBkb2N1bWVudC5jb250YWlucyh0aGlzLl9lbGVtZW50KSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlQ2xpY2tPdXRDbG9zZShldnQpIHtcclxuICAgIGlmICghdGhpcy5fZWxlbWVudC5jb250YWlucyhldnQudGFyZ2V0KSkge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgcGFnZVNldHRpbmdzKCk7XHJcbiAgICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICAgIHRoaXMuX2VsZW1lbnQuY2xhc3NMaXN0LnRvZ2dsZShcInBvcHVwXCIpO1xyXG4gICAgfSwgMTAwKTtcclxuXHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgcGFnZVNldHRpbmdzKCk7XHJcbiAgICB0aGlzLl9yZW1vdmVFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2Nsb3NlQnV0dG9uID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl9fY2xvc2VcIik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZUZuID0gKGV2dCkgPT4gdGhpcy5faGFuZGxlRXNjQ2xvc2UoZXZ0KTtcclxuICAgIHRoaXMuX2hhbmRsZUNsaWNrT3V0Q2xvc2VGbiA9IChldnQpID0+IHRoaXMuX2hhbmRsZUNsaWNrT3V0Q2xvc2UoZXZ0KTtcclxuXHJcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4gdGhpcy5jbG9zZSgpKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlRm4pO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCB0aGlzLl9oYW5kbGVDbGlja091dENsb3NlRm4pO1xyXG4gIH1cclxuXHJcbiAgX3JlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2VGbik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwibW91c2Vkb3duXCIsIHRoaXMuX2hhbmRsZUNsaWNrT3V0Q2xvc2VGbik7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgaGFuZGxlRXZlbnRTdWJtaXQgfSwgcG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX2hhbmRsZUV2ZW50U3VibWl0ID0gaGFuZGxlRXZlbnRTdWJtaXQ7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX3llc0J1dHRvbiA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5idG5fX3N1Ym1pdFwiKTtcclxuXHJcbiAgICB0aGlzLl95ZXNCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUV2ZW50U3VibWl0KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgaGFuZGxlRXZlbnRTdWJtaXQgfSwgcG9wdXApIHtcclxuICAgIHN1cGVyKHBvcHVwKTtcclxuICAgIHRoaXMuX2hhbmRsZUV2ZW50U3VibWl0ID0gaGFuZGxlRXZlbnRTdWJtaXQ7XHJcbiAgfVxyXG5cclxuICByZW5kZXJMb2FkaW5nKGlzTG9hZGluZywgc2F2ZSkge1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnRuX19zdWJtaXRcIikudGV4dENvbnRlbnQgPSBcIk1lbnlpbXBhbi4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ0bl9fc3VibWl0XCIpLnRleHRDb250ZW50ID0gc2F2ZTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcclxuICAgIHRoaXMuX2Zvcm1WYWx1ZXMgPSB7fTtcclxuXHJcbiAgICBBcnJheS5mcm9tKHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5mb3JtX19pbnB1dFwiKSkuZm9yRWFjaChcclxuICAgICAgKGlucHV0KSA9PiB7XHJcbiAgICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgICB9XHJcbiAgICApO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgICB0aGlzLl9lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRXZlbnRTdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3RvcihkYXRhLCBwb3B1cCkge1xyXG4gICAgc3VwZXIocG9wdXApO1xyXG4gICAgdGhpcy5faW1hZ2UgPSBkYXRhLnNyYztcclxuICAgIHRoaXMuX3RleHQgPSBkYXRhLmFsdDtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICBzdXBlci5vcGVuKCk7XHJcblxyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnNob3ctcGljdHVyZV9faW1hZ2VcIikuc3JjID0gdGhpcy5faW1hZ2U7XHJcbiAgICB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2hvdy1waWN0dXJlX19pbWFnZVwiKS5hbHQgPSB0aGlzLl90ZXh0O1xyXG4gICAgdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLnNob3ctcGljdHVyZV9fdGV4dFwiKS50ZXh0Q29udGVudCA9IHRoaXMuX3RleHQ7XHJcblxyXG4gICAgcmV0dXJuIHRoaXMuX2VsZW1lbnQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgaXRlbXMsIHJlbmRlcmVyIH0sIGNvbnRhaW5lclNlbGVjdG9yKSB7XHJcbiAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5hcHBlbmQoZWxlbWVudCk7XHJcbiAgfVxyXG5cclxuICBjbGVhcigpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5pbm5lckhUTUwgPSBcIlwiO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLl9yZW5kZXJlZEl0ZW1zKSkge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlZEl0ZW1zLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcih0aGlzLl9yZW5kZXJlZEl0ZW1zKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgdXNlck5hbWUsIHVzZXJBYm91dCB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IHVzZXJOYW1lO1xyXG4gICAgdGhpcy5fdXNlckFib3V0ID0gdXNlckFib3V0O1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHRoaXMuX3VzZXJOYW1lLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX3VzZXJBYm91dC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuLi9zdHlsZXMvaW5kZXguY3NzXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvQXBpLmpzXCI7XHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZVwiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBlZGl0UHJvZmlsZUFjdGl2ZSwgZWRpdFByb2ZpbGVJbmFjdGl2ZSB9IGZyb20gXCIuLi91dGlscy91dGlscy5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHZhbGlkYXRpb25FbGVtZW50cyxcclxuICBjb250ZW50LFxyXG4gIGVsZW1lbnQsXHJcbiAgY2FyZFRlbXBsYXRlLFxyXG4gIHByb2ZpbGVUZW1wbGF0ZSxcclxuICBlZGl0VGVtcGxhdGUsXHJcbiAgYWRkVGVtcGxhdGUsXHJcbiAgZGVsZXRlQ2FyZFRlbXBsYXRlLFxyXG4gIHNob3dQaWN0dXJlVGVtcGxhdGUsXHJcbiAgZWRpdEJ1dHRvblNlbGVjdG9yLFxyXG4gIGFkZEJ1dHRvblNlbGVjdG9yLFxyXG4gIHByb2ZpbGVVc2VyU2VsZWN0b3IsXHJcbiAgcHJvZmlsZUFib3V0U2VsZWN0b3IsXHJcbiAgcHJvZmlsZVBpY3R1cmVTZWxlY3RvcixcclxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XHJcbi8vIGluaXRpYWxpemUgY2FyZHMgYXBpXHJcbmNvbnN0IGFwaSA9IG5ldyBBcGkoe1xyXG4gIGJhc2VVcmw6IFwiaHR0cHM6Ly9hcm91bmQubm9tb3JlcGFydGllcy5jby92MS93ZWJfaWRuXzAyXCIsXHJcbiAgaGVhZGVyczoge1xyXG4gICAgYXV0aG9yaXphdGlvbjogXCIwMDhjMWM1NS0zYjU2LTQ2ZjYtOTYwNS1hMTBjYWM0YmNkY2VcIixcclxuICAgIFwiQ29udGVudC1UeXBlXCI6IFwiYXBwbGljYXRpb24vanNvblwiLFxyXG4gIH0sXHJcbn0pO1xyXG4vLyByZW5kZXJpbmcgY2FyZHMgdG8gcGFnZVxyXG5sZXQgY2FyZExpc3Q7XHJcblxyXG5hcGlcclxuICAuZ2V0SW5pdGlhbEluZm8oKVxyXG4gIC50aGVuKChbY2FyZHMsIHVzZXJdKSA9PiB7XHJcbiAgICBwcm9maWxlUGljdHVyZVNlbGVjdG9yLnNyYyA9IHVzZXIuYXZhdGFyO1xyXG4gICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiB1c2VyLm5hbWUsIGFib3V0OiB1c2VyLmFib3V0IH0pO1xyXG4gICAgY2FyZExpc3QgPSBuZXcgU2VjdGlvbihcclxuICAgICAge1xyXG4gICAgICAgIGl0ZW1zOiBjYXJkcyxcclxuICAgICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGhhbmRsZUNhcmRDbGljazogKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvcHVwSW1hZ2UoZSk7XHJcbiAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgaGFuZGxlRGVsZXRlQ2xpY2s6IChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25maXJtRGVsZXRlKGNhcmQsIGUpO1xyXG4gICAgICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgICAgIC5kZWxldGVDYXJkKGl0ZW0uX2lkKVxyXG4gICAgICAgICAgICAgICAgICAudGhlbigpXHJcbiAgICAgICAgICAgICAgICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgICAgaGFuZGxlTGlrZUNsaWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2FyZC5pc0xpa2VkKCkgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgIGl0ZW0ubGlrZXMucHVzaCh1c2VyKTtcclxuICAgICAgICAgICAgICAgICAgY2FyZC50b2dnbGVMaWtlKCk7XHJcbiAgICAgICAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgICAgICAgIC5saWtlQ2FyZChpdGVtLl9pZClcclxuICAgICAgICAgICAgICAgICAgICAudGhlbigpXHJcbiAgICAgICAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICBpdGVtLmxpa2VzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgICBjYXJkLnRvZ2dsZUxpa2UoKTtcclxuICAgICAgICAgICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgICAgICAgICAgLmRpc2xpa2VDYXJkKGl0ZW0uX2lkKVxyXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKClcclxuICAgICAgICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBpdGVtLFxyXG4gICAgICAgICAgICBjYXJkVGVtcGxhdGVcclxuICAgICAgICAgICk7XHJcbiAgICAgICAgICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2VuZXJhdGVDYXJkKCk7XHJcbiAgICAgICAgICBjYXJkTGlzdC5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxuICAgICAgICB9LFxyXG4gICAgICB9LFxyXG4gICAgICBlbGVtZW50XHJcbiAgICApO1xyXG4gICAgY2FyZExpc3QuY2xlYXIoKTtcclxuICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbiAgfSlcclxuICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyKTtcclxuICB9KTtcclxuLy8gZ2V0IGN1cnJlbnQgdXNlciBpbmZvXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZTogcHJvZmlsZVVzZXJTZWxlY3RvcixcclxuICB1c2VyQWJvdXQ6IHByb2ZpbGVBYm91dFNlbGVjdG9yLFxyXG59KTtcclxuLy8gcG9wdXAgYWRkIG1vZGFsXHJcbmNvbnN0IHBvcHVwUHJvZmlsZUZvcm0gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogcHJvZmlsZVRlbXBsYXRlLFxyXG4gICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgIGNvbnN0IHBvcHVwV2luZG93cyA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gICAgICAgIHtcclxuICAgICAgICAgIGhhbmRsZUV2ZW50U3VibWl0OiAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgcG9wdXBXaW5kb3dzLnJlbmRlckxvYWRpbmcodHJ1ZSk7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5zZXRVc2VyUGljdHVyZSh2YWx1ZS5saW5rKVxyXG4gICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcm9maWxlUGljdHVyZVNlbGVjdG9yLnNyYyA9IGRhdGEuYXZhdGFyO1xyXG4gICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFdpbmRvd3MucmVuZGVyTG9hZGluZyhmYWxzZSwgXCJTaW1wYW5cIik7XHJcbiAgICAgICAgICAgICAgICBwb3B1cFdpbmRvd3MuY2xvc2UoKTtcclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpdGVtXHJcbiAgICAgICk7XHJcbiAgICAgIGNvbnN0IHNob3dGb3JtTW9kYWwgPSBwb3B1cFdpbmRvd3Mub3BlbigpO1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkVsZW1lbnRzLCBzaG93Rm9ybU1vZGFsKTtcclxuICAgICAgdmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgICAgIHBvcHVwUHJvZmlsZUZvcm0uYWRkSXRlbShzaG93Rm9ybU1vZGFsKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBjb250ZW50XHJcbik7XHJcbi8vIHBvcHVwIGVkaXQgbW9kYWxcclxuY29uc3QgcG9wdXBFZGl0Rm9ybSA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBlZGl0VGVtcGxhdGUsXHJcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgcG9wdXBXaW5kb3dzID0gbmV3IFBvcHVwV2l0aEZvcm0oXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgaGFuZGxlRXZlbnRTdWJtaXQ6ICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICBwb3B1cFdpbmRvd3MucmVuZGVyTG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oeyBuYW1lOiB2YWx1ZS5uYW1lLCBhYm91dDogdmFsdWUudGl0bGUgfSk7XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5zZXRVc2VySW5mbyh2YWx1ZSlcclxuICAgICAgICAgICAgICAudGhlbigoKSA9PiB7fSlcclxuICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2luZG93cy5yZW5kZXJMb2FkaW5nKGZhbHNlLCBcIlNpbXBhblwiKTtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2luZG93cy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW1cclxuICAgICAgKTtcclxuICAgICAgY29uc3Qgc2hvd0Zvcm1Nb2RhbCA9IHBvcHVwV2luZG93cy5vcGVuKCk7XHJcbiAgICAgIGNvbnN0IGdldEluZm8gPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG4gICAgICBjb25zdCBuYW1lVmFsdWUgPSBzaG93Rm9ybU1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJuYW1lXCJdJyk7XHJcbiAgICAgIGNvbnN0IGFib3V0VmFsdWUgPSBzaG93Rm9ybU1vZGFsLnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJ0aXRsZVwiXScpO1xyXG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gbmV3IEZvcm1WYWxpZGF0b3IodmFsaWRhdGlvbkVsZW1lbnRzLCBzaG93Rm9ybU1vZGFsKTtcclxuICAgICAgdmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIG5hbWVWYWx1ZS52YWx1ZSA9IGdldEluZm8ubmFtZTtcclxuICAgICAgICBhYm91dFZhbHVlLnZhbHVlID0gZ2V0SW5mby5hYm91dDtcclxuICAgICAgfSwgMTAwKTtcclxuICAgICAgcG9wdXBFZGl0Rm9ybS5hZGRJdGVtKHNob3dGb3JtTW9kYWwpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIGNvbnRlbnRcclxuKTtcclxuLy8gcG9wdXAgYWRkIG1vZGFsXHJcbmNvbnN0IHBvcHVwQWRkRm9ybSA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIGl0ZW1zOiBhZGRUZW1wbGF0ZSxcclxuICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xyXG4gICAgICBjb25zdCBwb3B1cFdpbmRvd3MgPSBuZXcgUG9wdXBXaXRoRm9ybShcclxuICAgICAgICB7XHJcbiAgICAgICAgICBoYW5kbGVFdmVudFN1Ym1pdDogKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgIHBvcHVwV2luZG93cy5yZW5kZXJMb2FkaW5nKHRydWUpO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdDYXJkID0ge1xyXG4gICAgICAgICAgICAgIG5hbWU6IHZhbHVlLnRpdGxlLFxyXG4gICAgICAgICAgICAgIGxpbms6IHZhbHVlLmxpbmssXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAgIC5wb3N0Q2FyZChuZXdDYXJkKVxyXG4gICAgICAgICAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjYXJkTGlzdC5fcmVuZGVyZWRJdGVtcy51bnNoaWZ0KGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgY2FyZExpc3QuY2xlYXIoKTtcclxuICAgICAgICAgICAgICAgIGNhcmRMaXN0LnJlbmRlckl0ZW1zKCk7XHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2luZG93cy5yZW5kZXJMb2FkaW5nKGZhbHNlLCBcIlNpbXBhblwiKTtcclxuICAgICAgICAgICAgICAgIHBvcHVwV2luZG93cy5jbG9zZSgpO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGl0ZW1cclxuICAgICAgKTtcclxuICAgICAgY29uc3Qgc2hvd0Zvcm1Nb2RhbCA9IHBvcHVwV2luZG93cy5vcGVuKCk7XHJcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uRWxlbWVudHMsIHNob3dGb3JtTW9kYWwpO1xyXG4gICAgICB2YWxpZGF0aW9uLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuICAgICAgcG9wdXBBZGRGb3JtLmFkZEl0ZW0oc2hvd0Zvcm1Nb2RhbCk7XHJcbiAgICB9LFxyXG4gIH0sXHJcbiAgY29udGVudFxyXG4pO1xyXG4vLyBwb3B1cCBhZGQgbW9kYWxcclxuY29uc3QgY29uZmlybURlbGV0ZSA9IChkYXRhLCBldmVudCkgPT4ge1xyXG4gIGNvbnN0IGRlbGV0ZUNhcmRNb2RhbCA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogZGVsZXRlQ2FyZFRlbXBsYXRlLFxyXG4gICAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcclxuICAgICAgICBjb25zdCBwb3B1cFdpbmRvd3MgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKFxyXG4gICAgICAgICAge1xyXG4gICAgICAgICAgICBoYW5kbGVFdmVudFN1Ym1pdDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgIGRhdGEuZGVsZXRlQ2FyZChldmVudCk7XHJcbiAgICAgICAgICAgICAgcG9wdXBXaW5kb3dzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICB9LFxyXG4gICAgICAgICAgaXRlbVxyXG4gICAgICAgICk7XHJcbiAgICAgICAgY29uc3Qgc2hvd0Zvcm1Nb2RhbCA9IHBvcHVwV2luZG93cy5vcGVuKCk7XHJcbiAgICAgICAgZGVsZXRlQ2FyZE1vZGFsLmFkZEl0ZW0oc2hvd0Zvcm1Nb2RhbCk7XHJcbiAgICAgIH0sXHJcbiAgICB9LFxyXG4gICAgY29udGVudFxyXG4gICk7XHJcbiAgZGVsZXRlQ2FyZE1vZGFsLnJlbmRlckl0ZW1zKCk7XHJcbn07XHJcblxyXG4vLyBwb3B1cCBpbWFnZSBtb2RhbFxyXG5jb25zdCBwb3B1cEltYWdlID0gKGV2dCkgPT4ge1xyXG4gIGNvbnN0IHNob3dQb3B1cCA9IG5ldyBTZWN0aW9uKFxyXG4gICAge1xyXG4gICAgICBpdGVtczogZXZ0LnRhcmdldCxcclxuICAgICAgcmVuZGVyZXI6IChpdGVtKSA9PiB7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VNb2RhbCA9IG5ldyBQb3B1cFdpdGhJbWFnZShpdGVtLCBzaG93UGljdHVyZVRlbXBsYXRlKTtcclxuICAgICAgICBjb25zdCBzaG93SW1hZ2VNb2RhbCA9IGltYWdlTW9kYWwub3BlbigpO1xyXG4gICAgICAgIHNob3dQb3B1cC5hZGRJdGVtKHNob3dJbWFnZU1vZGFsKTtcclxuICAgICAgfSxcclxuICAgIH0sXHJcbiAgICBjb250ZW50XHJcbiAgKTtcclxuICBzaG93UG9wdXAucmVuZGVySXRlbXMoKTtcclxufTtcclxuLy8gZ2xvYmFsIGV2ZW50IGxpc3RlbmVyc1xyXG5wcm9maWxlUGljdHVyZVNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBQcm9maWxlRm9ybS5yZW5kZXJJdGVtcygpO1xyXG59KTtcclxuZWRpdEJ1dHRvblNlbGVjdG9yLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgcG9wdXBFZGl0Rm9ybS5yZW5kZXJJdGVtcygpO1xyXG59KTtcclxuYWRkQnV0dG9uU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwb3B1cEFkZEZvcm0ucmVuZGVySXRlbXMoKTtcclxufSk7XHJcbnByb2ZpbGVQaWN0dXJlU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLCBlZGl0UHJvZmlsZUFjdGl2ZSk7XHJcbnByb2ZpbGVQaWN0dXJlU2VsZWN0b3IuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3V0XCIsIGVkaXRQcm9maWxlSW5hY3RpdmUpO1xyXG4iXSwibmFtZXMiOlsiQXBpIiwiX3JlZiIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX2NsYXNzQ2FsbENoZWNrIiwidGhpcyIsIl9iYXNlVXJsIiwiX2hlYWRlcnMiLCJrZXkiLCJ2YWx1ZSIsInJlcyIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJjb25jYXQiLCJzdGF0dXMiLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsImFsbCIsIl9nZXRJbml0aWFsQ2FyZCIsIl9nZXRVc2VySW5mbyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiYXZhdGFyIiwibmFtZSIsImFib3V0IiwidGl0bGUiLCJjYXJkSWQiLCJDYXJkIiwiZGF0YSIsImNhcmRTZWxlY3RvciIsImhhbmRsZUNhcmRDbGljayIsImhhbmRsZURlbGV0ZUNsaWNrIiwiaGFuZGxlTGlrZUNsaWNrIiwiX25hbWUiLCJfbGluayIsImxpbmsiLCJfbGlrZXMiLCJsaWtlcyIsIl9vd25lciIsIm93bmVyIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVDYXJkQ2xpY2siLCJfaGFuZGxlRGVsZXRlQ2xpY2siLCJfaGFuZGxlTGlrZUNsaWNrIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsIl9lbGVtZW50IiwiX2dldFRlbXBsYXRlIiwiX2ltYWdlIiwiX2ltYWdlVGV4dCIsIl9jYXJkTGlrZXMiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsImxlbmd0aCIsIl9zZXRFdmVudExpc3RlbmVycyIsIl9pbml0aWFsTGlrZVN0YXRlIiwiZSIsInRhcmdldCIsImNsb3Nlc3QiLCJyZW1vdmUiLCJfaGVhcnRCdXR0b24iLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJpc0xpa2VkIiwiYWRkIiwiX3RoaXMiLCJzb21lIiwibGlrZSIsIl9pZCIsIl9kZWxldGVCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiRm9ybVZhbGlkYXRvciIsIml0ZW1zIiwiZm9ybUVsZW1lbnQiLCJfZm9ybUlucHV0U2VsZWN0b3IiLCJmb3JtSW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2lucHV0RXJyb3JNb2RpZmllciIsImlucHV0RXJyb3JNb2RpZmllciIsIl9lcnJvck1vZGlmaWVyIiwiZXJyb3JNb2RpZmllciIsIl9idXR0b25FcnJvck1vZGlmaWVyIiwiYnV0dG9uRXJyb3JNb2RpZmllciIsIl9mb3JtRWxlbWVudCIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiX2lucHV0TGlzdCIsIl9oYXNJbnB1dEludmFsaWQiLCJfYnV0dG9uIiwiZGlzYWJsZWQiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGF0aW9uRWxlbWVudHMiLCJwcm9maWxlVXNlclNlbGVjdG9yIiwicHJvZmlsZUFib3V0U2VsZWN0b3IiLCJjb250ZW50U2VsZWN0b3IiLCJtYWluQ29udGVudFNlbGVjdG9yIiwiZWRpdEJ1dHRvblNlbGVjdG9yIiwiYWRkQnV0dG9uU2VsZWN0b3IiLCJwcm9maWxlUGljdHVyZVNlbGVjdG9yIiwicHJvZmlsZUVkaXRTZWxlY3RvciIsInBhZ2VTZXR0aW5ncyIsInNjcm9sbGJhcldpZHRoIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudFdpZHRoIiwic3R5bGUiLCJvdmVyZmxvdyIsIndpZHRoIiwiUG9wdXAiLCJwb3B1cCIsIl9wb3B1cCIsIl9jbGFzcyIsInJlcGxhY2UiLCJfcG9wdXBFbGVtZW50IiwiZXZ0IiwiY29udGFpbnMiLCJjbG9zZSIsInNldFRpbWVvdXQiLCJfcmVtb3ZlRXZlbnRMaXN0ZW5lcnMiLCJfdGhpczIiLCJfY2xvc2VCdXR0b24iLCJfaGFuZGxlRXNjQ2xvc2VGbiIsIl9oYW5kbGVFc2NDbG9zZSIsIl9oYW5kbGVDbGlja091dENsb3NlRm4iLCJfaGFuZGxlQ2xpY2tPdXRDbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJfUG9wdXAiLCJfaW5oZXJpdHMiLCJfc3VwZXIiLCJoYW5kbGVFdmVudFN1Ym1pdCIsImNhbGwiLCJfaGFuZGxlRXZlbnRTdWJtaXQiLCJfZ2V0IiwiX2dldFByb3RvdHlwZU9mIiwicHJvdG90eXBlIiwiX3llc0J1dHRvbiIsIlBvcHVwV2l0aEZvcm0iLCJpc0xvYWRpbmciLCJzYXZlIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsIl90aGlzMyIsInByZXZlbnREZWZhdWx0IiwiX2dldElucHV0VmFsdWVzIiwiUG9wdXBXaXRoSW1hZ2UiLCJfdGV4dCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsInJlbmRlcmVyIiwiX3JlbmRlcmVkSXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiZWxlbWVudCIsImFwcGVuZCIsImlubmVySFRNTCIsImlzQXJyYXkiLCJpdGVtIiwiVXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJBYm91dCIsIl91c2VyTmFtZSIsIl91c2VyQWJvdXQiLCJfcmVmMiIsImNhcmRMaXN0IiwiYXBpIiwiYXV0aG9yaXphdGlvbiIsImdldEluaXRpYWxJbmZvIiwiY2FyZHMiLCJ1c2VyIiwidXNlckluZm8iLCJzZXRVc2VySW5mbyIsImNhcmQiLCJwb3B1cEltYWdlIiwiY29uZmlybURlbGV0ZSIsImRlbGV0ZUNhcmQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJwdXNoIiwidG9nZ2xlTGlrZSIsImxpa2VDYXJkIiwicG9wIiwiZGlzbGlrZUNhcmQiLCJjYXJkRWxlbWVudCIsImdlbmVyYXRlQ2FyZCIsImFkZEl0ZW0iLCJjbGVhciIsInJlbmRlckl0ZW1zIiwicG9wdXBQcm9maWxlRm9ybSIsInBvcHVwV2luZG93cyIsInJlbmRlckxvYWRpbmciLCJzZXRVc2VyUGljdHVyZSIsImZpbmFsbHkiLCJzaG93Rm9ybU1vZGFsIiwib3BlbiIsImVuYWJsZVZhbGlkYXRpb24iLCJwb3B1cEVkaXRGb3JtIiwiZ2V0SW5mbyIsImdldFVzZXJJbmZvIiwibmFtZVZhbHVlIiwiYWJvdXRWYWx1ZSIsInBvcHVwQWRkRm9ybSIsIm5ld0NhcmQiLCJwb3N0Q2FyZCIsInVuc2hpZnQiLCJldmVudCIsImRlbGV0ZUNhcmRNb2RhbCIsInNob3dQb3B1cCIsInNob3dJbWFnZU1vZGFsIiwiZGlzcGxheSJdLCJzb3VyY2VSb290IjoiIn0=